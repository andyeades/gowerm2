<style>
#ev_ln_btm_description_wrapper h2 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 1rem 0 .5rem;
}
div#ev_ln_btm_description_wrapper {
    margin-top: 50px;
    margin-bottom: 50px;
}
#ev_ln_btm_description_wrapper h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 1rem 0 .5rem;
}
#ev_ln_btm_description_wrapper h4 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 1rem 0 .5rem;
}
#ev_ln_btm_description_wrapper ul {
    list-style-type: initial;
    margin-left: 23px;
    margin-top: 20px;
}
</style>
<div id="ev_ln_btm_description_wrapper">
<?php 


/*

    array(
                'value' => 'onload_default_ajax_no',
                'label' => 'Onload = Default Description, Ajax = No Description',
            ),
            array(
                'value' => 'onload_default_ajax_default',
                'label' => 'Onload = Default Description, Ajax = Default Description',
            ),
            array(
                'value' => 'onload_default_ajax_ajax',
                'label' => 'Onload = Default Description, Ajax = Ajax Description',
            ),
            array(
                'value' => 'onload_no_ajax_ajax',
                'label' => 'Onload = No Description, Ajax = Ajax Description',
            ) 

*/


   $objectManager = \Magento\Framework\App\ObjectManager::getInstance();
   $category = $objectManager->get('Magento\Framework\Registry')->registry('current_category');//get current category
$filterProvider = $objectManager->create('\Magento\Cms\Model\Template\FilterProvider');
$storeManager = $objectManager->create('\Magento\Store\Model\StoreManagerInterface');


   
   $ev_landingpages_btm_desc = $category->getData('ev_landingpages_btm_desc');
   $ev_landingpages_btm_desc_type = $category->getData('ev_landingpages_btm_desc_type');
   $ev_landingpages_btm_desc_ajax = $category->getData('ev_landingpages_btm_desc_ajax');
        
   
   $bottom_description = '';
 
 
 
//get block
$bottom_description =  $this->getLayout()
->createBlock('Magento\Cms\Block\Block')
->setBlockId('CATFooter_'.$category->getId())
->toHtml();

//$this->getLayout()->createBlock('cms/block')->setBlockId('CATFooter_'.$category->getId())->toHtml()
 
 
   
   if($ev_landingpages_btm_desc_type == 'onload_default_ajax_no' || $ev_landingpages_btm_desc_type == 'onload_default_ajax_default' || $ev_landingpages_btm_desc_type == 'onload_default_ajax_ajax' ){
        $bottom_description = $ev_landingpages_btm_desc;
   }
   
   
 
$is_landing_page =$objectManager->get('Magento\Framework\Registry')->registry('elevate_landingpage');

if($is_landing_page){
$bottom_description = '';
 $landing_page_data =$objectManager->get('Magento\Framework\Registry')->registry('elevate_landingpage_data');
              
  $landing_page_btm_desc = $landing_page_data['page_bottom_description']; 
     if(!empty($landing_page_btm_desc)){
       $bottom_description = $landing_page_btm_desc;
     }
}


if(!empty($bottom_description)){

echo "<hr style=\"margin-bottom: 46px;\">";
}   
echo $filterProvider->getBlockFilter()
                    ->setStoreId($storeManager->getStore()->getId())
                    ->filter($bottom_description);
                                        
                  $faqCol =$objectManager->create('Elevate\LandingPages\Model\ResourceModel\LandingPageFaq\CollectionFactory');   
           


        $category_id = $category->getId();
           
           
        $faqCollection = $faqCol->create()->addFieldToFilter('category_id', $category_id);
                
          
     if($faqCollection){

           echo '
          <style> 
.accordion {
	
}
.accordion dt, .accordion dd {
    padding: 20px;
}
 .accordion dt:last-of-type, .accordion dd:last-of-type {

}
 .accordion dt a, .accordion dd a {

	 color: black;
	 font-weight: bold;
}


.accordion dt a:hover{
text-decoration:none;
}
.accordion dt a{
display:flex;
align-items: center;
}
 .accordion dd {
	 border-top: 0;
	 font-size: 12px;
}
 .accordion dd:last-of-type {
	
	 position: relative;
	 top: -1px;
}
span.qa_bullet {
    line-height: 2.1875rem;
    font-size: 2.5em;
    padding: 0.8rem 0rem 0.8rem 0;
    font-weight: 200;
    color: #00acb6;
    margin-left: 0;
    margin-left: auto;
    order: 2;
}
span.qa_bullet:hover{
text-decoration:none;
}
.acc_wrap {
    border: 1px solid #ccc;
    margin-bottom: 10px;
    border-radius: 7px;
}
.acc_link{
font-size: 1.125rem;
    font-weight: 600;
}
  </style>
           <dl class="accordion">';  
                
               foreach ($faqCollection as $faqItem) {
               
               
            ?>
            


<div class="acc_wrap">
<dt><a href=""><div class="acc_link"><?php echo $faqItem->getQuestion(); ?></div><span class="qa_bullet fa fa-plus" data-role="icons"></a></span></dt>
<dd class="hide_acc_control hide_acc"><?php echo $faqItem->getAnswer(); ?></dd>
</div>



            <?
               
               
                              
            }
            echo '</dl>'; 
            
            echo "<script>
            
            (function($) {
    
  var allPanels = $('.accordion  dd').hide();
    
    
    $('.accordion  dt').addClass('panel_hidden');
    
  $('.accordion dt a').click(function() {
  
 if ( $( this ).parent().hasClass( 'panel_shown' ) ) {
 
 }
 else{
   
   
     $('.accordion  dt').removeClass('panel_shown').addClass('panel_hidden');
    allPanels.slideUp();
    
 $('.accordion .qa_bullet').removeClass('fa-minus').addClass('fa-plus');   
    $(this).parent().removeClass('panel_hidden').addClass('panel_shown');
    $(this).find('.qa_bullet').removeClass('fa-plus').addClass('fa-minus');
    $(this).parent().next().slideDown();

 }  return false;
  });
  
})(jQuery);
            
            </script>";           
    
            }    
  
?>
</div>
