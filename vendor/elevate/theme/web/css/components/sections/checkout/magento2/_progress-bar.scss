//
//  Variables
//

$checkout-progress-bar-font-size: 1.125rem !default;
$checkout-progress-bar-font-weight: $font-weight-light !default;
$checkout-progress-bar-margin: 2rem !default;
$checkout-progress-bar-item-background-color: $color-gray-middle1 !default;
$checkout-progress-bar-item-border-radius: 6px !default;
$checkout-progress-bar-item-color: $primary-color !default;
$checkout-progress-bar-item-margin: $indent-s !default;
$checkout-progress-bar-item-width: 185px !default;
$checkout-progress-bar-item-active-background-color: $theme-brand-color-2 !default;
$checkout-progress-bar-item-complete-color: $link-color !default;

$checkout-progress-bar-item-element-width: 38px !default;
$checkout-progress-bar-item-element-height: $checkout-progress-bar-item-element-width !default;

$checkout-progress-bar-item-element-inner-background-color: $page-background-color !default;
$checkout-progress-bar-item-element-inner-color: $checkout-progress-bar-item-color !default;
$checkout-progress-bar-item-element-outer-radius-width: 6px !default;
$checkout-progress-bar-item-element-inner-width: $checkout-progress-bar-item-element-width - ($checkout-progress-bar-item-element-outer-radius-width * 2) !default;
$checkout-progress-bar-item-element-inner-height: $checkout-progress-bar-item-element-inner-width !default;
$checkout-progress-bar-item-element-inner-active-content: $icon-checkmark !default;
$checkout-progress-bar-item-element-inner-active-font-size: 1.75rem !default;
$checkout-progress-bar-item-element-inner-active-line-height: 1 !default;

$opc-progress-bar-width: auto !default;

$opc-progress-bar-align: center !default;
$opc-progress-bar-margin: 0 auto 2rem auto !default;

$opc-progress-bar-width-desktop: 100% !default;
$opc-progress-bar-align-desktop: center !default;
$opc-progress-bar-order-desktop: 1 !default;

//
//  Checkout Progress Bar
//

.opc-progress-bar {
    @include abs-reset-list();
    @include co(margin, $opc-progress-bar-margin);
    counter-reset: i;
    font-size: 0;
    @include co(width, $opc-progress-bar-width);
    text-align: $opc-progress-bar-align;
    @include min-screen($desktop-min) {

        @include co(width, $opc-progress-bar-width-desktop, $opc-progress-bar-width);
        @include co(text-align, $opc-progress-bar-align-desktop, $opc-progress-bar-width);
        @include co(order, $opc-progress-bar-order-desktop);
    }
}

.opc-progress-bar-item {
    @include lib-css(margin, 0 0 $checkout-progress-bar-item-margin);
    display: inline-block;
    position: relative;
    text-align: center;
    vertical-align: top;
    width: 50%;

    &:before { // Horizontal line
        @include lib-css(background, $checkout-progress-bar-item-background-color);
        @include lib-css(top, $checkout-progress-bar-item-element-width/2);
        content: '';
        height: 7px;
        left: 0;
        position: absolute;
        width: 100%;
    }

    &:first-child {
        &:before {
            @include lib-css(border-radius, $checkout-progress-bar-item-border-radius 0 0 $checkout-progress-bar-item-border-radius);
        }
    }

    &:last-child {
        &:before {
            @include lib-css(border-radius, 0 $checkout-progress-bar-item-border-radius $checkout-progress-bar-item-border-radius 0);
        }
    }

    > span {
        display: inline-block;
        padding-top: 45px;
        width: 100%;
        word-wrap: break-word;

        @include lib-typography(
            $-color: $checkout-progress-bar-item-background-color,
            $-font-family: false,
            $-font-size: $checkout-progress-bar-font-size,
            $-font-style: false,
            $-font-weight: $checkout-progress-bar-font-weight,
            $-line-height: false
        );

        &:before, // Item element
        &:after {
            @include lib-css(background, $checkout-progress-bar-item-background-color);
            @include lib-css(height, $checkout-progress-bar-item-element-height);
            @include lib-css(margin-left, -($checkout-progress-bar-item-element-width/2));
            @include lib-css(width, $checkout-progress-bar-item-element-width);
            border-radius: 50%;
            content: '';
            left: 50%;
            position: absolute;
            top: 0;
        }

        &:after { // Item element inner
            @include lib-css(background, $checkout-progress-bar-item-element-inner-background-color);
            @include lib-css(height, $checkout-progress-bar-item-element-inner-height);
            @include lib-css(margin-left, -($checkout-progress-bar-item-element-inner-width/2));
            @include lib-css(top, $checkout-progress-bar-item-element-outer-radius-width);
            @include lib-css(width, $checkout-progress-bar-item-element-inner-width);
            content: counter(i);
            counter-increment: i;
            @include lib-typography(
                $-color: $checkout-progress-bar-item-element-inner-color,
                $-font-family: false,
                $-font-size: $checkout-progress-bar-font-size,
                $-font-style: false,
                $-font-weight: $font-weight-semibold,
                $-line-height: false
            );
        }
    }

    &._active {
        &:before {
            @include co(background, $checkout-progress-bar-item-active-background-color);
        }

        > span {
            @include lib-css(color, $checkout-progress-bar-item-color);

            &:before {
                @include lib-css(background, $checkout-progress-bar-item-active-background-color);
            }

            &:after {
                @include lib-css(content, $checkout-progress-bar-item-element-inner-active-content);
                @include lib-css(font-family, $icons-font-name);
                @include lib-css(line-height, $checkout-progress-bar-item-element-inner-active-line-height);
                @include lib-font-size($checkout-progress-bar-item-element-inner-active-font-size);
            }
        }
    }

    &._complete {
        cursor: pointer;

        > span {
            @include lib-css(color, $checkout-progress-bar-item-color);

            &:after {
                @include lib-css(content, $checkout-progress-bar-item-element-inner-active-content);
                @include lib-css(font-family, $icons-font-name);
                @include lib-css(line-height, $checkout-progress-bar-item-element-inner-active-line-height);
                @include lib-font-size($checkout-progress-bar-item-element-inner-active-font-size);
            }
        }
    }
}

//
//  Desktop
//

@include min-screen($screen-m) {
    .opc-progress-bar-item {
        @include lib-css(width, $checkout-progress-bar-item-width);
    }
}
