//
//  Variables
//  _____________________________________________

$form-field__vertical-indent__desktop: 29px !default;
$form-calendar-icon__color: $primary__color !default;
$form-control-rounding: false !default;

$field_choice_label_margin: 0 0 0 0.5rem !default;


$textarea_default_height_on: 0 !default;
$textarea_default_height: 8rem !default;


@include lib-form-element-all();


textarea {
    @if $textarea_default_height_on == 1 {
        height: $textarea_default_height;
    }
}


.form-control {
    // Elevate RJ - 2020-02-19 - Fix for Padding Issue on Non Rounded Input Boxes and Background Color Spilling Through
    @if $enable-rounded == false {
        background-clip: initial;
    }
    @if $form-control-rounding == false {
        background-clip: initial;
    }
}

.misc {
    input.bundle.checkbox {
        display: inline-block !important;
        opacity: 1;
        left: initial;
        position: relative;
        margin-top: 3px;
        margin-right: 9px;
    }

    .aw-sbp__bundle-options-container .fieldset-bundle-options {
        margin: 0 0 10px;
    }

    .aw-sbp__bundle-options-container .fieldset-bundle-options .legend {
        display: none;
    }

    .aw-sbp__bundle-options-container .fieldset-bundle-options .legend + br {
        display: none;
    }

    .aw-sbp__bundle-options-container .bundle-options-container .bundle-options-wrapper,
    .aw-sbp__bundle-options-container .bundle-options-container .product-options-wrapper {
        float: none;
        width: auto;
    }

    .aw-sbp__bundle-options-container .bundle-options-container .product-options-wrapper .fieldset-bundle-options .field.choice .label {
        margin-left: 0;
    }

    .aw-sbp__hidden-container {
        display: none;
    }

}



.fieldset {
    overflow: hidden;
    @include lib-form-fieldset();

    &:last-child {
        margin-bottom: 0;
    }
    .legend {
        @include min-screen($desktop-min) {
            @include abs-margin-for-forms-desktop();
        }
    }
    > .field {
       @include min-screen($desktop-min) {
           @include lib-form-field-type-revert();
       }
    }
    > .field,
    > .fields > .field {
        @include lib-form-field();

        &.no-label {
            > .label {
                @include abs-visually-hidden();
            }
        }

        &.choice {
            .label {
                display: inline;
                font-weight: normal;
            }
        }

        .label {
            .column:not(.main) & {
                font-weight: normal;
            }
        }

        .field.choice {
            //margin-bottom: $indent__s;

            &:last-child {
                margin-bottom: 0;
            }
        }

        input[type=file] {
            margin: $indent__xs 0;
        }
    }

    .field.choice {
        label {
            margin: $field_choice_label_margin;

        }

        .tooltip.wrapper {
            margin: $field_choice_label_margin;
        }
    }

    &:focus {
        outline: none;
    }
}

.legend + .fieldset,
.legend + div {
    clear: both;
}


.legend {
    strong {
        margin-left: $indent__xs;
    }
}

fieldset.field {
    border: 0;
    padding: 0;
}

$form_field_choice_margin: 0 0 0.75rem 0 !default;

$form_field_choice_input_margin: 0 0.3125rem 0 0 !default;

$form_field_choice_label_font-size: 0.9375rem !default;

$field-name-prefix-control-select-max-width: 150px !default;

.field-name-prefix {
    .control {
        select {
            @include co(max-width, $field-name-prefix-control-select-max-width);
        }
    }
}


.field {
    .control {
        select {

        }
        input {

        }
    }
    .choice {
        margin: $form_field_choice_margin;

        input {
            margin: $form_field_choice_input_margin;
        }

        label {
            font-size: $form_field_choice_label_font-size;
        }

    }

    &.date {
        .control {

            position: relative;
        }

        input {
            @include lib-css(margin-right, $indent__s);
            width: calc(100% - #{$icon-calendar__font-size + $indent__s});
        }

        .time-picker {
            display: inline-block;
            margin-top: $indent__s;
            white-space: nowrap;
        }
    }

    .message {
        &.warning {
            margin-top: $indent__s;
        }
    }
}

$options_list_field_choice_label: wrapping-checkbox !default;

$options_list_field_choice_checkbox_display: block !default;


$options_list_field_choice_label_bg_color: #FFF !default;
$options_list_field_choice_label_alignitems: flex-start !default;
$options_list_field_choice_label_border_radius: $border-radius !default;
$options_list_field_choice_label_padding: 0.625rem !default;
$options_list_field_choice_label_border_radius: $border-radius !default;
$options_list_field_choice_label_width: 100% !default;
$options_list_field_choice_label_fontsize: 0.8125rem !default;
$options_list_field_choice_label_border: 2px solid transparent !default;
$options_list_field_choice_label_checkboxselected_border: 2px solid #e66100 !default;

$options_list_field_choice_label_price_fontsize: 0.75rem !default;
$options_list_field_choice_label_price_fontweight: 600 !default;
$options_list_field_choice_label_price_color: $body-color !default;
$options_list_field_choice_label_price_padding: false !default;

$options_list_field_choice_product_name_color: $body-color !default;
$options_list_field_choice_product_name_fontsize: false !default;
$options_list_field_choice_product_name_padding: 0 0 0.25rem !default;
$options_list_field_choice_product_name_fontweight: 600 !default;
$options_list_field_choice_product_name_width: 100% !default;

$options_list_field_choice_selectionsku_fontsize: $options_list_field_choice_label_price_fontsize !default;
$options_list_field_choice_selectionsku_fontweight: 400 !default;
$options_list_field_choice_selectionsku_margin: 0 0 0 0.125rem !default;

// Checkbox Label Before (How the Tick box is styled)

$options_list_checkbox_label_before_border_radius: 16px !default;
$options_list_checkbox_label_before_fontsize: 0.6875rem !default;
$options_list_checkbox_label_before_padding: 0.375rem 0 0 0 !default;
$options_list_checkbox_label_before_width: 16px !default;
$options_list_checkbox_label_before_height: 16px !default;
$options_list_checkbox_label_before_max-width: 16px !default;
$options_list_checkbox_label_before_flex: 0 0 16px !default;
$options_list_checkbox_label_before_margin: 0.125rem 0.625rem 0 0 !default;

$options_list_checkbox_label_before_color: #F4F6F8 !default;
$options_list_checkbox_label_before_bgcolor: #F4F6F8 !default;
$options_list_checkbox_label_before_border_color: #F4F6F8 !default; //ccc
$options_list_checkbox_label_before_border_thickness: 1px !default;
$options_list_checkbox_label_before_border_style: solid !default;

// Checkbox Label After (the Check/Tick)

$options_list_checkbox_label_after_left: 13px !default;
$options_list_checkbox_label_after_width: 10px !default;
$options_list_checkbox_label_after_height: 10px !default;
$options_list_checkbox_label_after_margin: -5.5px 0 0 0 !default;
$options_list_checkbox_label_after_top: 50% !default;
$options_list_checkbox_label_after_bg_image: url("data:image/svg+xml,%3Csvg width='1792' height='1792' viewBox='0 0 1792 1792' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z' fill='%23fff'/%3E%3C/svg%3E") !default;

$options_list_checked_border_color: #F65601 !default;
$options_list_checked_bgcolor: #F65601 !default;


.nested.options-list {
    .field.choice {
        label {
            display: flex;
            align-items: $options_list_field_choice_label_alignitems;
            cursor: pointer;
            position: relative;
            @include co(background-color, $options_list_field_choice_label_bg_color);
            @include co(border-radius, $options_list_field_choice_label_border_radius);
            @include co(padding, $options_list_field_choice_label_padding);
            @include co(width, $options_list_field_choice_label_width);
            border: $options_list_field_choice_label_border;

            &.checkbox-selected {
                border: $options_list_field_choice_label_checkboxselected_border;

                &:before {
                    border-color: $options_list_checked_border_color;
                    background-color: $options_list_checked_bgcolor;
                }

                &:after {
                    position: absolute;
                    content: "";
                    left: $options_list_checkbox_label_after_left;
                    width: $options_list_checkbox_label_after_width;
                    height: $options_list_checkbox_label_after_height;
                    top: $options_list_checkbox_label_after_top;
                    margin: $options_list_checkbox_label_after_margin;
                    background-repeat: no-repeat;
                    background-size: contain;
                    background-image: $options_list_checkbox_label_after_bg_image;
                }
            }

            &:before {
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                content: "";
                border-radius: $options_list_checkbox_label_before_border_radius;
                margin: $options_list_checkbox_label_before_margin;
                font-size: $options_list_checkbox_label_before_fontsize;
                padding: $options_list_checkbox_label_before_padding;
                width: $options_list_checkbox_label_before_width;
                height: $options_list_checkbox_label_before_height;
                max-width: $options_list_checkbox_label_before_max-width;
                flex: $options_list_checkbox_label_before_flex;
                color: $options_list_checkbox_label_before_bgcolor;
                background-color: $options_list_checkbox_label_before_bgcolor;
                border: $options_list_checkbox_label_before_border_thickness $options_list_checkbox_label_before_border_style $options_list_checkbox_label_before_border_color;

            }

        }

        .bo-checkbox {

        }

        .bo-label-content {
            flex: 1 1 auto;
            display: flex;
            flex-wrap: wrap;
        }

        .product-item-link,
        .product-name {
            @include co(color, $options_list_field_choice_product_name_color);
            @include co(padding, $options_list_field_choice_product_name_padding);
            @include co(font-size, $options_list_field_choice_product_name_fontsize);
            @include co(font-weight, $options_list_field_choice_product_name_fontweight);
            @include co(width, $options_list_field_choice_product_name_width);
        }

        .price {
            @include co(font-size, $options_list_field_choice_label_price_fontsize);
            @include co(font-weight, $options_list_field_choice_label_price_fontweight);
            @include co(padding, $options_list_field_choice_label_price_padding);
        }

        .price-wrapper {
            &:after {
                @include co(font-size, $options_list_field_choice_label_price_fontsize);
                @include co(font-weight, $options_list_field_choice_label_price_fontweight);
                @include co(color, $options_list_field_choice_label_price_color);
            }
        }

        .price-notice {
            @include co(font-size, $options_list_field_choice_label_price_fontsize);
        }

        .selection-sku {
            @include co(font-size, $options_list_field_choice_selectionsku_fontsize);
            @include co(font-weight, $options_list_field_choice_selectionsku_fontweight);
            @include co(margin, $options_list_field_choice_selectionsku_margin);
        }

        .checkbox {
            @include co(display, $options_list_field_choice_checkbox_display);
            position: absolute;
            left: 0;
            opacity: 0;

        }

        .checkbox-selected {
            .checkbox {

            }
        }
    }
}


.field-error,
div.mage-error[generated] {
    margin-top: 7px;
}

.field-error {
    @include lib-form-validation-note();
}

.field .tooltip {
    @include lib-tooltip(right);

    .tooltip-content {
        min-width: 200px;
        white-space: normal;

    }
}

.field-tooltip {
    .field-tooltip-content {
        &:before, &:after {
            box-sizing: content-box;
        }

    }
}

input,
select {
    &:focus ~ .tooltip .tooltip-content {
        display: block;
    }
}

._has-datepicker {
    ~ .ui-datepicker-trigger {
        @include lib-button-reset();
        @include lib-icon-font(
            $_icon-font-content: $icon-calendar,
            $_icon-font-color: $primary__color__lighter,
            $_icon-font-size: $icon-calendar__font-size,
            $_icon-font-line-height: $icon-calendar__font-size,
            $_icon-font-display: block,
            $_icon-font-text-hide: true
        );
        display: inline-block;
        vertical-align: middle;

        &:focus {
            box-shadow: none;
            outline: 0;
        }
    }
}

//
//  Sidebar forms
//  -----------------------------------------

.sidebar {
    .fieldset {
        margin: 0;

        & > .field:not(.choice),
        .fields > .field {
            &:not(:last-child) {
                margin: 0 0 $form-field__vertical-indent;
            }

            .label {
                margin: 0 0 4px;
                padding: 0 0 $indent__xs;
                text-align: left;
                width: 100%;
            }

            .control {
                width: 100%;
            }
        }
    }
}

//
//  Desktop
//  _____________________________________________


