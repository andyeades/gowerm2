@import './_mixins.scss';
@import './_vars.scss';

.#{$tippyjs-namespace-prefix}-box {
  @each $tippyjs-placement in $tippyjs-placements {
    &[data-placement^='#{$tippyjs-placement}'] {
      > .#{$tippyjs-namespace-prefix}-backdrop {
        transform-origin: nth(
          $tippyjs-backdrop-origins,
          index($tippyjs-placements, $tippyjs-placement)
        );
        border-radius: nth(
          $tippyjs-backdrop-border-radii,
          index($tippyjs-placements, $tippyjs-placement)
        );

        &[data-state='visible'] {
          @include backdrop-transform-enter($tippyjs-placement);
        }

        &[data-state='hidden'] {
          @include backdrop-transform-leave($tippyjs-placement);
        }
      }
    }
  }
}

.#{$tippyjs-namespace-prefix}-box {
  &[data-animatefill] {
    // Declared with !important so that custom themes don't need to specify
    // this property.
    background-color: transparent !important;
  }
}

.#{$tippyjs-namespace-prefix}-backdrop {
  position: absolute;
  background-color: #333;
  border-radius: 50%;
  width: calc(110% + 32px);
  left: 50%;
  top: 50%;
  z-index: -1;
  transition: all cubic-bezier(0.46, 0.1, 0.52, 0.98);
  backface-visibility: hidden;

  &[data-state='hidden'] {
    opacity: 0;
  }

  &::after {
    content: '';
    float: left;
    padding-top: 100%;
  }
}

.#{$tippyjs-namespace-prefix}-backdrop + .#{$tippyjs-namespace-prefix}-content {
  transition-property: opacity;
  will-change: opacity;

  &[data-state='hidden'] {
    opacity: 0;
  }
}
