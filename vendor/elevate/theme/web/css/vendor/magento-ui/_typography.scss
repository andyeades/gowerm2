//
//  Typography
//

@mixin lib-font-face(
    $family-name,
    $font-path,
    $font-weight: normal,
    $font-style: normal,
    $font-display: optional
) {
    @font-face {
        font-family: $family-name;
        src: url('#{$font-path}.eot');
        src: url('#{$font-path}.eot?#iefix') format('embedded-opentype'),
        url('#{$font-path}.woff2') format('woff2'),
        url('#{$font-path}.woff') format('woff'),
        url('#{$font-path}.ttf') format('truetype'),
        url('#{$font-path}.svg##{$family-name}') format('svg');
        @include co(font-weight, $font-weight);
        font-style: $font-style;
        font-display: $font-display;
    }
}

//  Rem font size
@mixin lib-font-size($sizeValue) {
    @if type-of($sizeValue) == number and unit($sizeValue) != '%' and $sizeValue != false {
        @if unit($sizeValue) == $font-size-unit or unit($sizeValue) == 'em' {
            @include lib-css(font-size, $sizeValue);
        }
        @else {
            @include lib-css(font-size, lib-font-size-value($sizeValue));
        }
    }
}

//  Rem line height
@mixin lib-line-height($heightValue) {
    @if $heightValue != false {
        @if unit($heightValue) == '%' {
            @include lib-css(line-height, $heightValue);
        }
        @else {
            @include lib-css(line-height, lib-font-size-value($heightValue));
        }
    }
}


@mixin lib-wrap-words() {
    @include lib-hyphens();
    word-wrap: break-word;
}

@mixin lib-text-overflow() {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

@mixin lib-text-hide() {
    background-color: transparent;
    border: 0;
    color: transparent;
    font: '0px/0' a;
    text-shadow: none;
}

//  Optional hyphenation
@mixin lib-hyphens($mode: auto) {
    word-wrap: break-word;
    hyphens: $mode;
}

@mixin lib-typography(
    $-font-size: $font-size-base,
    $-color: $text-color,
    $-font-family: $font-family-base,
    $-font-weight: $font-weight-regular,
    $-line-height: $line-height-base,
    $-font-style: $font-style-base
) {
    @include lib-css(color, $-color);
    @include lib-css(font-family, $-font-family);
    @include lib-css(font-style, $-font-style);
    @include lib-css(font-weight, $-font-weight);
    @include lib-css(line-height, $-line-height);
    @include lib-font-size($-font-size);
}

@mixin lib-list-reset-styles($-margin: 0, $-padding: 0) {
    @include lib-css(margin, $-margin);
    @include lib-css(padding, $-padding);
    list-style: none none;
}

@mixin lib-list-inline() {
    @include lib-list-reset-styles();
    & > li {
        display: inline-block;
        vertical-align: top;
    }
}

@mixin lib-link(
    $-link-color                   : $link-color,
    $-link-text-decoration         : $link-text-decoration,
    $-link-color-visited           : $link-visited-color,
    $-link-text-decoration-visited : $link-visited-text-decoration,
    $-link-color-hover             : $link-hover-color,
    $-link-text-decoration-hover   : $link-hover-text-decoration,
    $-link-color-active            : $link-active-color,
    $-link-text-decoration-active: $link-active-text-decoration
) {
    @include lib-css(color, $-link-color);
    @include lib-css(text-decoration, $-link-text-decoration);

    &:visited {
        @include lib-css(color, $-link-color-visited);
        @include lib-css(text-decoration, $-link-text-decoration-visited);
    }

    &:hover {
        @include lib-css(color, $-link-color-hover);
        @include lib-css(text-decoration, $-link-text-decoration-hover);
    }

    &:active {
        @include lib-css(color, $-link-color-active);
        @include lib-css(text-decoration, $-link-text-decoration-active);
    }
}


@mixin lib-heading($-heading-level: h1) {
    $h1: (
        color         : $h1-font-color,
        font-size     : $h1-font-size,
        font-family   : $h1-font-family,
        font-weight   : $h1-font-weight,
        line-height   : $h1-line-height,
        font-style    : $h1-font-style,
        margin-top    : $h1-margin-top,
        margin-bottom : $h1-margin-bottom
    );

    $h2: (
        color         : $h2-font-color,
        font-size     : $h2-font-size,
        font-family   : $h2-font-family,
        font-weight   : $h2-font-weight,
        line-height   : $h2-line-height,
        font-style    : $h2-font-style,
        margin-top    : $h2-margin-top,
        margin-bottom : $h2-margin-bottom
    );

    $h3: (
        color         : $h3-font-color,
        font-size     : $h3-font-size,
        font-family   : $h3-font-family,
        font-weight   : $h3-font-weight,
        line-height   : $h3-line-height,
        font-style    : $h3-font-style,
        margin-top    : $h3-margin-top,
        margin-bottom : $h3-margin-bottom
    );

    $h4: (
        color         : $h4-font-color,
        font-size     : $h4-font-size,
        font-family   : $h4-font-family,
        font-weight   : $h4-font-weight,
        line-height   : $h4-line-height,
        font-style    : $h4-font-style,
        margin-top    : $h4-margin-top,
        margin-bottom : $h4-margin-bottom
    );

    $h5: (
        color         : $h5-font-color,
        font-size     : $h5-font-size,
        font-family   : $h5-font-family,
        font-weight   : $h5-font-weight,
        line-height   : $h5-line-height,
        font-style    : $h5-font-style,
        margin-top    : $h5-margin-top,
        margin-bottom : $h5-margin-bottom
    );

    $h6: (
        color         : $h6-font-color,
        font-size     : $h6-font-size,
        font-family   : $h6-font-family,
        font-weight   : $h6-font-weight,
        line-height   : $h6-line-height,
        font-style    : $h6-font-style,
        margin-top    : $h6-margin-top,
        margin-bottom : $h6-margin-bottom
    );

    $map: $h1;
    @if $-heading-level == h2 {
        $map: $h2;
    }
    @else if $-heading-level == h3 {
        $map: $h3;
    }
    @else if $-heading-level == h4 {
        $map: $h4;
    }
    @else if $-heading-level == h5 {
        $map: $h5;
    }
    @else if $-heading-level == h6 {
        $map: $h6;
    }

    $-font-color    : map-get($map, color);
    $-font-size     : map-get($map, font-size);
    $-font-family   : map-get($map, font-family);
    $-font-weight   : map-get($map, font-weight);
    $-line-height   : map-get($map, line-height);
    $-font-style    : map-get($map, font-style);
    $-margin-top    : map-get($map, margin-top);
    $-margin-bottom : map-get($map, margin-bottom);

    @include lib-typography(
        $-font-size,
        $-font-color,
        $-font-family,
        $-font-weight,
        $-line-height,
        $-font-style
    );

    @include lib-css(margin-top, lib-font-size-value($-margin-top));
    @include lib-css(margin-bottom, lib-font-size-value($-margin-bottom));
}

//
//  Base typography
//

@mixin lib-typography-base(
    $-abbr-border-color     : $abbr-border-color,
    $-dfn-font-style        : $font-style-emphasis,
    $-emphasis-font-style   : $font-style-emphasis,
    $-hr-border-color       : $hr-border-color,
    $-hr-border-style       : $hr-border-style,
    $-hr-border-width       : $hr-border-width,
    $-hr-margin-bottom      : $line-height-computed,
    $-hr-margin-top         : $line-height-computed,
    $-mark-background-color : $mark-background-color,
    $-mark-color            : $mark-color,
    $-p-margin-bottom       : $p-margin-bottom,
    $-p-margin-top          : $p-margin-top,
    $-root-font-size        : $root-font-size,
    $-small-font-size       : $font-size-s,
    $-strong-font-weight    : $font-weight-bold,
    $-sub-sup-font-size     : ($font-size-xs / $font-size-base) * 100%
) {


    p {
        & {
            @include lib-css(margin-top, lib-font-size-value($-p-margin-top));
        }

        & {
            @include lib-css(margin-bottom, $-p-margin-bottom);
        }
    }

    //  Abbreviations and acronyms
    abbr[title] {
        @include lib-css(border-bottom, 1px dotted $-abbr-border-color);
        cursor: help;
    }

    b,
    strong {
        @include lib-css(font-weight, $-strong-font-weight);
    }

    em,
    i {
        @include lib-css(font-style, $-emphasis-font-style);
    }

    mark {
        @include lib-css(background, $-mark-background-color);
        @include lib-css(color, $-mark-color);
    }

    small,
    .small {
        @include lib-css(font-size, $-small-font-size);
    }

    hr {
        border: 0;
        @include lib-css(border-top, $-hr-border-width $-hr-border-style $-hr-border-color);
        @include lib-css(margin-bottom, $-hr-margin-bottom);
        @include lib-css(margin-top, $-hr-margin-top);
    }

    sub,
    sup {
        @include lib-css(font-size, $-sub-sup-font-size);
        line-height: 0;
        position: relative;
        vertical-align: baseline;
    }

    sup {
        top: -0.5em;
    }

    sub {
        bottom: -0.25em;
    }

    dfn {
        @include lib-css(font-style, $-dfn-font-style);
    }
}

//
//  Headings
//

@mixin lib-typography-headings(
    $-heading-small-color       : $heading-small-color,
    $-heading-small-line-height : $heading-small-line-height,
    $-heading-small-size        : $heading-small-size
) {
    h1 {
        @include lib-heading(h1);
    }

    h2 {
        @include lib-heading(h2);
    }

    h3 {
        @include lib-heading(h3);
    }

    h4 {
        @include lib-heading(h4);
    }

    h5 {
        @include lib-heading(h5);
    }

    h6 {
        @include lib-heading(h6);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        small,
        .small {
            @include lib-typography(
                $-heading-small-size,
                $-heading-small-color,
                $-line-height: $-heading-small-line-height
            );
        }
    }
}


//
//  Links
//

@mixin lib-typography-links() {
    a,
    .alink {
        @include lib-link();
    }
}

//
//  Unordered and Ordered lists
//

@mixin lib-typography-lists(
    $-list-margin-bottom      : $list-margin-bottom,
    $-list-margin-top         : $list-margin-top,
    $-list-item-margin-bottom : $list-item-margin-bottom,
    $-list-item-margin-top    : $list-item-margin-top,
    $-dl-margin-bottom        : $dl-margin-bottom,
    $-dl-margin-top           : $dl-margin-top,
    $-dd-margin-bottom        : $dd-margin-bottom,
    $-dd-margin-top           : $dd-margin-top,
    $-dt-font-weight          : $dt-font-weight,
    $-dt-margin-bottom        : $dt-margin-bottom,
    $-dt-margin-top           : $dt-margin-top
) {
    ul,
    ol {
        @include lib-css(margin-top, lib-font-size-value($-list-margin-top));
        @include lib-css(margin-bottom, lib-font-size-value($-list-margin-bottom));

        & > li {
            @include lib-css(margin-top, lib-font-size-value($-list-item-margin-top));
            @include lib-css(margin-bottom, lib-font-size-value($-list-item-margin-bottom));
        }

        ul,
        ol {
            margin-bottom: 0;
        }
    }

    dl {
        @include lib-css(margin-bottom, $-dl-margin-bottom);
        @include lib-css(margin-top, $-dl-margin-top);
    }

    dt {
        @include lib-css(font-weight, $-dt-font-weight);
        @include lib-css(margin-bottom, $-dt-margin-bottom);
        @include lib-css(margin-top, $-dt-margin-top);
    }

    dd {
        @include lib-css(margin-bottom, $-dd-margin-bottom);
        @include lib-css(margin-top, $-dd-margin-top);
        margin-left: 0;
    }
}

//
//  Code (inline and block)
//

@mixin lib-typography-code(
    $-font-family-monospace : $font-family-monospace,
    $-code-background-color : $code-background-color,
    $-code-color            : $code-color,
    $-code-font-size        : $code-font-size,
    $-code-padding          : $code-padding,
    $-kbd-background-color  : $kbd-background-color,
    $-kbd-color             : $kbd-color,
    $-kbd-font-size         : $code-font-size,
    $-kbd-padding           : $code-padding,
    $-pre-background-color  : $pre-background-color,
    $-pre-border-color      : $pre-border-color,
    $-pre-border-width      : $pre-border-width,
    $-pre-color             : $pre-color,
    $-pre-font-size         : $code-font-size,
    $-pre-line-height       : $line-height-base,
    $-pre-margin            : 0 0 $indent-s,
    $-pre-padding           : $indent-s
) {
    code,
    kbd,
    pre,
    samp {
        @include lib-css(font-family, $-font-family-monospace);
    }

    //  Inline code
    code {
        @include lib-css(background, $-code-background-color);
        @include lib-css(color, $-code-color);
        @include lib-css(padding, $-code-padding);
        @include lib-font-size($-code-font-size);
        white-space: nowrap;
    }

    //  User input typically entered via keyboard
    kbd {
        @include lib-css(background, $-kbd-background-color);
        @include lib-css(color, $-kbd-color);
        @include lib-css(padding, $-kbd-padding);
        @include lib-font-size($-kbd-font-size);
    }

    //  Blocks of code
    pre {
        @include lib-css(background, $-pre-background-color);
        @include lib-css(border, $-pre-border-width solid $-pre-border-color);
        @include lib-css(color, $-pre-color);
        @include lib-css(line-height, $-pre-line-height);
        @include lib-css(margin, $-pre-margin);
        @include lib-css(padding, $-pre-padding);
        @include lib-font-size($-pre-font-size);
        display: block;
        word-wrap: break-word;

        code {
            background-color: transparent;
            border-radius: 0;
            color: inherit;
            font-size: inherit;
            padding: 0;
            white-space: pre-wrap;
        }
    }
}

//
//  Blockquotes
//

@mixin lib-typography-blockquote(
    $-blockquote-border-color: $blockquote-border-color,
    $-blockquote-border-width: $blockquote-border-width,
    $-blockquote-font-size: $blockquote-font-size,
    $-blockquote-font-style: $blockquote-font-style,
    $-blockquote-margin: $blockquote-margin,
    $-blockquote-padding: $blockquote-padding,
    $-blockquote-small-before-content: $blockquote-content-before,
    $-blockquote-small-color: $blockquote-small-color,
    $-blockquote-small-font-size: $blockquote-small-font-size,
    $-blockquote-small-line-height: $line-height-base,
    $-blockquote-cite: $cite-font-style,
    $-cite: $cite-font-style
) {
    blockquote {
        @include lib-css(border-left, $-blockquote-border-width solid $-blockquote-border-color);
        @include lib-css(margin, $-blockquote-margin);
        @include lib-css(padding, $-blockquote-padding);
        @include lib-typography(
            $-font-size: $-blockquote-font-size,
            $-font-style: $-blockquote-font-style
        );

        p,
        ul,
        ol {
            &:last-child {
                margin-bottom: 0;
            }
        }

        footer,
        small,
        .small {
            @include lib-css(color, $-blockquote-small-color);
            @include lib-css(line-height, $-blockquote-small-line-height);
            @include lib-font-size($-blockquote-small-font-size);
            display: block;

            &:before {
                @include lib-css(content, $-blockquote-small-before-content);
            }
        }

        cite {
            @include lib-css(font-style, $-blockquote-cite);
        }
    }

    //  Quotes
    blockquote {
        &:before,
        &:after {
            content: '';
        }
    }

    q {
        quotes: none;

        &:before,
        &:after {
            content: '';
            content: none;
        }
    }

    //  Undo browser default styling
    cite {
        @include lib-css(font-style, $-cite);
    }
}

//
//  All typography
//

@mixin lib-typography-all() {
    //@include lib-typography-base();
    //@include lib-typography-headings(); // Using Bootstrap Headings
    //@include lib-typography-links();
    //@include lib-typography-lists();
    @include lib-typography-code();
    @include lib-typography-blockquote();
}
