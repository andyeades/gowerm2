//
//  Dropdowns
//

//
//  Simple dropdown
//

@mixin lib-dropdown(
    $-toggle-selector                           : ".action.toggle",
    $-options-selector                          : "ul.dropdown",

    $-dropdown-actions-padding                  : $dropdown-actions-padding,
    $-dropdown-list-min-width                   : $dropdown-list-min-width,
    $-dropdown-list-width                       : $dropdown-list-width,
    $-dropdown-list-height                      : $dropdown-list-height,
    $-dropdown-list-margin-top                  : $dropdown-list-margin-top,
    $-dropdown-list-position-top                : $dropdown-list-position-top,
    $-dropdown-list-position-bottom             : $dropdown-list-position-bottom,
    $-dropdown-list-position-left               : $dropdown-list-position-left,
    $-dropdown-list-position-right              : $dropdown-list-position-right,
    $-dropdown-list-background                  : $dropdown-list-background,
    $-dropdown-list-border                      : $dropdown-list-border,
    $-dropdown-list-pointer                     : $dropdown-list-pointer,
    $-dropdown-list-pointer-border              : $dropdown-list-pointer-border,
    $-dropdown-list-pointer-position            : $dropdown-list-pointer-position,
    $-dropdown-list-pointer-position-top        : $dropdown-list-pointer-position-top,
    $-dropdown-list-pointer-position-left-right : $dropdown-list-pointer-position-left-right,
    $-dropdown-list-item-border                 : $dropdown-list-item-border,
    $-dropdown-list-item-padding                : $dropdown-list-item-padding,
    $-dropdown-list-item-margin                 : $dropdown-list-item-margin,
    $-dropdown-list-item-hover                  : $dropdown-list-item-hover,
    $-dropdown-list-shadow                      : $dropdown-list-shadow,
    $-dropdown-list-z-index                     : $dropdown-list-z-index,

    $-dropdown-toggle-icon-content              : $dropdown-toggle-icon-content,
    $-dropdown-toggle-active-icon-content       : $dropdown-toggle-icon-active-content,

    $-icon-font                                 : $dropdown-toggle-icon-font,
    $-icon-font-size                            : $dropdown-toggle-icon-font-size,
    $-icon-font-line-height                     : $dropdown-toggle-icon-font-line-height,
    $-icon-font-color                           : $dropdown-toggle-icon-font-color,
    $-icon-font-color-hover                     : $dropdown-toggle-icon-font-color-hover,
    $-icon-font-color-active                    : $dropdown-toggle-icon-font-color-active,
    $-icon-font-margin                          : $dropdown-toggle-icon-font-margin,
    $-icon-font-position                        : $dropdown-toggle-icon-position,
    $-icon-font-vertical-align                  : $dropdown-toggle-icon-font-vertical-align,
    $-icon-font-text-hide                       : $dropdown-toggle-icon-text-hide
) {
    @include lib-clearfix();
    display: inline-block;
    position: relative;

    #{$-toggle-selector} {
        @include lib-css(padding, $-dropdown-actions-padding);
        cursor: pointer;

        @include _lib-dropdown-icon(
            $-dropdown-toggle-icon-content,
            $-dropdown-toggle-active-icon-content,
            $-icon-font,
            $-icon-font-size,
            $-icon-font-line-height,
            $-icon-font-color,
            $-icon-font-color-hover,
            $-icon-font-color-active,
            $-icon-font-margin,
            $-icon-font-vertical-align,
            $-icon-font-position,
            $-icon-font-text-hide
        );
    }

    @include _lib-dropdown-styles(
        $-options-selector,
        $-dropdown-list-min-width,
        $-dropdown-list-width,
        $-dropdown-list-height,
        $-dropdown-list-margin-top,
        $-dropdown-list-background,
        $-dropdown-list-border,
        $-dropdown-list-z-index,
        $-dropdown-list-shadow,
        $-dropdown-list-item-padding,
        $-dropdown-list-item-margin,
        $-dropdown-list-item-border,
        $-dropdown-list-item-hover,
        $-dropdown-list-position-top,
        $-dropdown-list-position-bottom,
        $-dropdown-list-position-left,
        $-dropdown-list-position-right,
        $-dropdown-list-pointer,
        $-dropdown-list-pointer-border,
        $-dropdown-list-pointer-position,
        $-dropdown-list-pointer-position-top,
        $-dropdown-list-pointer-position-left-right
    );
}

//
//  Split dropdown
//

@mixin lib-dropdown-split(
    $-toggle-selector                                 : ".action.toggle",
    $-options-selector                                : "ul.dropdown",
    $-button-selector                                 : ".action.split",

    $-dropdown-split-actions-padding                  : $dropdown-split-actions-padding,
    $-dropdown-split-button-actions-padding           : $dropdown-split-button-actions-padding,
    $-dropdown-split-toggle-actions-padding           : $dropdown-split-toggle-actions-padding,
    $-dropdown-split-toggle-position                  : $dropdown-split-toggle-position,
    $-dropdown-split-list-min-width                   : $dropdown-split-list-min-width,
    $-dropdown-split-list-width                       : $dropdown-split-list-width,
    $-dropdown-split-list-height                      : $dropdown-split-list-height,
    $-dropdown-split-list-margin-top                  : $dropdown-split-list-margin-top,
    $-dropdown-split-list-position-top                : $dropdown-split-list-position-top,
    $-dropdown-split-list-position-bottom             : $dropdown-split-list-position-bottom,
    $-dropdown-split-list-position-left               : $dropdown-split-list-position-left,
    $-dropdown-split-list-position-right              : $dropdown-split-list-position-right,
    $-dropdown-split-list-background                  : $dropdown-split-list-background,
    $-dropdown-split-list-border                      : $dropdown-split-list-border,
    $-dropdown-split-list-pointer                     : $dropdown-split-list-pointer,
    $-dropdown-split-list-pointer-border              : $dropdown-split-list-pointer-border,
    $-dropdown-split-list-pointer-position            : $dropdown-split-list-pointer-position,
    $-dropdown-split-list-pointer-position-top        : $dropdown-split-list-pointer-position-top,
    $-dropdown-split-list-pointer-position-left-right : $dropdown-split-list-pointer-position-left-right,
    $-dropdown-split-list-item-border                 : $dropdown-split-list-item-border,
    $-dropdown-split-list-item-padding                : $dropdown-split-list-item-padding,
    $-dropdown-split-list-item-margin                 : $dropdown-split-list-item-margin,
    $-dropdown-split-list-item-hover                  : $dropdown-split-list-item-hover,
    $-dropdown-split-button-border-radius-fix         : $dropdown-split-button-border-radius-fix,
    $-dropdown-split-list-shadow                      : $dropdown-split-list-shadow,
    $-dropdown-split-list-z-index                     : $dropdown-split-list-z-index,

    $-dropdown-split-toggle-icon-content              : $dropdown-split-toggle-icon-content,
    $-dropdown-split-toggle-active-icon-content       : $dropdown-split-toggle-icon-active-content,

    $-icon-font                                       : $dropdown-split-toggle-icon-font,
    $-icon-font-size                                  : $dropdown-split-toggle-icon-font-size,
    $-icon-font-line-height                           : $dropdown-split-toggle-icon-font-line-height,
    $-icon-font-color                                 : $dropdown-split-toggle-icon-font-color,
    $-icon-font-color-hover                           : $dropdown-split-toggle-icon-font-color-hover,
    $-icon-font-color-active                          : $dropdown-split-toggle-icon-font-color-active,
    $-icon-font-margin                                : $dropdown-split-toggle-icon-font-margin,
    $-icon-font-vertical-align                        : $dropdown-split-toggle-icon-font-vertical-align,
    $-icon-font-position                              : $dropdown-split-toggle-icon-position,
    $-icon-font-text-hide                             : $dropdown-split-toggle-icon-text-hide
) {
    @include lib-clearfix();
    display: inline-block;
    position: relative;

    @include _lib-dropdown-split-toggle-position(
        $-button-selector,
        $-toggle-selector,
        $-dropdown-split-toggle-position,
        $-dropdown-split-button-border-radius-fix
    );

    #{$-button-selector} {
        @include lib-css(padding, $-dropdown-split-button-actions-padding);
    }

    #{$-toggle-selector} {
        @include lib-css(padding, $-dropdown-split-toggle-actions-padding);
        @include _lib-dropdown-split-icon(
            $-dropdown-split-toggle-icon-content,
            $-dropdown-split-toggle-active-icon-content,
            $-icon-font,
            $-icon-font-size,
            $-icon-font-line-height,
            $-icon-font-color,
            $-icon-font-color-hover,
            $-icon-font-color-active,
            $-icon-font-margin,
            $-icon-font-vertical-align,
            $-icon-font-position,
            $-icon-font-text-hide
        );
    }

    @include _lib-dropdown-styles(
        $-options-selector                          : $-options-selector,
        $-dropdown-list-min-width                   : $-dropdown-split-list-min-width,
        $-dropdown-list-width                       : $-dropdown-split-list-width,
        $-dropdown-list-height                      : $-dropdown-split-list-height,
        $-dropdown-list-margin-top                  : $-dropdown-split-list-margin-top,
        $-dropdown-list-background                  : $-dropdown-split-list-background,
        $-dropdown-list-border                      : $-dropdown-split-list-border,
        $-dropdown-list-z-index                     : $-dropdown-split-list-z-index,
        $-dropdown-list-shadow                      : $-dropdown-split-list-shadow,
        $-dropdown-list-item-padding                : $-dropdown-split-list-item-padding,
        $-dropdown-list-item-margin                 : $-dropdown-split-list-item-margin,
        $-dropdown-list-item-border                 : $-dropdown-split-list-item-border,
        $-dropdown-list-item-hover                  : $-dropdown-split-list-item-hover,
        $-dropdown-list-position-top                : $-dropdown-split-list-position-top,
        $-dropdown-list-position-bottom             : $-dropdown-split-list-position-bottom,
        $-dropdown-list-position-left               : $-dropdown-split-list-position-left,
        $-dropdown-list-position-right              : $-dropdown-split-list-position-right,
        $-dropdown-list-pointer                     : $-dropdown-split-list-pointer,
        $-dropdown-list-pointer-border              : $-dropdown-split-list-pointer-border,
        $-dropdown-list-pointer-position            : $-dropdown-split-list-pointer-position,
        $-dropdown-list-pointer-position-top        : $-dropdown-split-list-pointer-position-top,
        $-dropdown-list-pointer-position-left-right : $-dropdown-split-list-pointer-position-left-right
    );
}

//
//  Internal use mixins
//

@mixin _lib-dropdown-styles(
    $-options-selector,
    $-dropdown-list-min-width,
    $-dropdown-list-width,
    $-dropdown-list-height,
    $-dropdown-list-margin-top,
    $-dropdown-list-background,
    $-dropdown-list-border,
    $-dropdown-list-z-index,
    $-dropdown-list-shadow,
    $-dropdown-list-item-padding,
    $-dropdown-list-item-margin,
    $-dropdown-list-item-border,
    $-dropdown-list-item-hover,
    $-dropdown-list-position-top,
    $-dropdown-list-position-bottom,
    $-dropdown-list-position-left,
    $-dropdown-list-position-right,
    $-dropdown-list-pointer,
    $-dropdown-list-pointer-border,
    $-dropdown-list-pointer-position,
    $-dropdown-list-pointer-position-top,
    $-dropdown-list-pointer-position-left-right
) {
    #{$-options-selector} {
        @include lib-list-reset-styles();
        @include lib-css(background, $-dropdown-list-background);
        @include lib-css(border, $-dropdown-list-border);
        @include lib-css(height, $-dropdown-list-height);
        @include lib-css(margin-top, $-dropdown-list-margin-top);
        @include lib-css(min-width, $-dropdown-list-min-width);
        @include lib-css(width, $-dropdown-list-width);
        @include lib-css(z-index, $-dropdown-list-z-index);

        display: none;
        position: absolute;

        @include _lib-dropdown-list-position(
            $-dropdown-list-position-top,
            $-dropdown-list-position-bottom,
            $-dropdown-list-position-left,
            $-dropdown-list-position-right
        );

        @include _lib-dropdown-list-shadow($-dropdown-list-shadow);

        li {
            @include lib-css(margin, $-dropdown-list-item-margin);
            @include lib-css(padding, $-dropdown-list-item-padding);

            @include _lib-dropdown-list-item-border(
                $-dropdown-list-item-border
            );

            &:hover {
                @include lib-css(background, $-dropdown-list-item-hover);
                cursor: pointer;
            }
        }

        @include _lib-dropdown-list-pointer(
            $-dropdown-list-background,
            $-dropdown-list-pointer,
            $-dropdown-list-pointer-border,
            $-dropdown-list-pointer-position,
            $-dropdown-list-pointer-position-top,
            $-dropdown-list-pointer-position-left-right
        );


    }

    &.active {
        overflow: visible;

        #{$-options-selector} {
            display: block;
        }
    }
}

//
//  Dropdown list position
//

@mixin _lib-dropdown-list-position(
    $-dropdown-list-position-top,
    $-dropdown-list-position-bottom,
    $-dropdown-list-position-left,
    $-dropdown-list-position-right
) {
    @if $-dropdown-list-position-top != false and $-dropdown-list-position-top != auto {
        top: $-dropdown-list-position-top;
    }
    @if $-dropdown-list-position-bottom != false and $-dropdown-list-position-bottom != auto {
        bottom: $-dropdown-list-position-bottom;
    }
    @if $-dropdown-list-position-left != false and $-dropdown-list-position-left != auto {
        left: $-dropdown-list-position-left;
    }
    @if $-dropdown-list-position-right != false and $-dropdown-list-position-right != auto {
        right: $-dropdown-list-position-right;
    }
}


//
//  Simple dropdown icon
//

@mixin _lib-dropdown-icon(
    $-dropdown-toggle-icon-content,
    $-dropdown-toggle-active-icon-content,
    $-icon-font,
    $-icon-font-size,
    $-icon-font-line-height,
    $-icon-font-color,
    $-icon-font-color-hover,
    $-icon-font-color-active,
    $-icon-font-margin,
    $-icon-font-vertical-align,
    $-icon-font-position,
    $-icon-font-text-hide
) {
    @include lib-icon-font(
        $-icon-font-content: $-dropdown-toggle-icon-content,
        $-icon-font: $-icon-font,
        $-icon-font-size: $-icon-font-size,
        $-icon-font-line-height: $-icon-font-line-height,
        $-icon-font-color: $-icon-font-color,
        $-icon-font-color-hover: $-icon-font-color-hover,
        $-icon-font-color-active: $-icon-font-color-active,
        $-icon-font-margin: $-icon-font-margin,
        $-icon-font-vertical-align: $-icon-font-vertical-align,
        $-icon-font-position: $-icon-font-position,
        $-icon-font-text-hide: $-icon-font-text-hide
    );

    &.active {
        @include lib-icon-font(
            $-icon-font-content: $-dropdown-toggle-active-icon-content,
            $-icon-font: $-icon-font,
            $-icon-font-size: $-icon-font-size,
            $-icon-font-line-height: $-icon-font-line-height,
            $-icon-font-color: $-icon-font-color,
            $-icon-font-color-hover: $-icon-font-color-hover,
            $-icon-font-color-active: $-icon-font-color-active,
            $-icon-font-margin: $-icon-font-margin,
            $-icon-font-vertical-align: $-icon-font-vertical-align,
            $-icon-font-position: $-icon-font-position,
            $-icon-font-text-hide: $-icon-font-text-hide
        );
    }
}

//
//  Split dropdowns
//

//  Split dropdown icon
@mixin _lib-dropdown-split-icon(
    $-dropdown-toggle-icon-content,
    $-dropdown-toggle-active-icon-content,
    $-icon-font,
    $-icon-font-size,
    $-icon-font-line-height,
    $-icon-font-color,
    $-icon-font-color-hover,
    $-icon-font-color-active,
    $-icon-font-margin,
    $-icon-font-vertical-align,
    $-icon-font-position,
    $-icon-font-text-hide
) {
    @include lib-button-icon(
        $-icon-font-content: $-dropdown-toggle-icon-content,
        $-icon-font: $-icon-font,
        $-icon-font-size: $-icon-font-size,
        $-icon-font-line-height: $-icon-font-line-height,
        $-icon-font-color: $-icon-font-color,
        $-icon-font-color-hover: $-icon-font-color-hover,
        $-icon-font-color-active: $-icon-font-color-active,
        $-icon-font-margin: $-icon-font-margin,
        $-icon-font-vertical-align: $-icon-font-vertical-align,
        $-icon-font-position: $-icon-font-position,
        $-icon-font-text-hide: $-icon-font-text-hide
    );

    &.active {
        @include lib-button-icon(
            $-icon-font-content: $-dropdown-toggle-active-icon-content,
            $-icon-font: $-icon-font,
            $-icon-font-size: $-icon-font-size,
            $-icon-font-line-height: $-icon-font-line-height,
            $-icon-font-color: $-icon-font-color,
            $-icon-font-color-hover: $-icon-font-color-hover,
            $-icon-font-color-active: $-icon-font-color-active,
            $-icon-font-margin: $-icon-font-margin,
            $-icon-font-vertical-align: $-icon-font-vertical-align,
            $-icon-font-position: $-icon-font-position,
            $-icon-font-text-hide: $-icon-font-text-hide
        );
    }
}

@mixin _lib-dropdown-split-toggle-position(
    $-button-selector,
    $-toggle-selector,
    $-dropdown-split-toggle-position,
    $-dropdown-split-button-border-radius-fix
) {
    @if $-dropdown-split-toggle-position == left {
        #{$-button-selector} {
            float: right;
            margin: 0;
        }
        #{$-toggle-selector} {
            float: left;
            margin: 0;
        }
        @if $-dropdown-split-button-border-radius-fix {
            button#{$-button-selector} {
                border-bottom-left-radius: 0;
                border-top-left-radius: 0;
            }

            button + #{$-toggle-selector} {
                border-bottom-right-radius: 0;
                border-right: 0;
                border-top-right-radius: 0;
            }
        }
    }
    @else if $-dropdown-split-toggle-position == right {
        #{$-button-selector} {
            float: left;
            margin: 0;
        }
        #{$-toggle-selector} {
            float: right;
            margin: 0;
        }
        @if $-dropdown-split-button-border-radius-fix {
            button#{$-button-selector} {
                border-bottom-right-radius: 0;
                border-top-right-radius: 0;
            }

            button + #{$-toggle-selector} {
                border-bottom-left-radius: 0;
                border-left: 0;
                border-top-left-radius: 0;
            }
        }
    }
}

//
//  Dropdown show pointer
//

@mixin _lib-dropdown-list-pointer(
    $-dropdown-list-background,
    $-dropdown-list-pointer,
    $-dropdown-list-pointer-border,
    $-dropdown-list-pointer-position,
    $-dropdown-list-pointer-position-top,
    $-dropdown-list-pointer-position-left-right
) {
    @if $-dropdown-list-pointer {
        @include _lib-dropdown-pointer(
            $-dropdown-list-background,
            $-dropdown-list-pointer-border,
            $-dropdown-list-pointer-position,
            $-dropdown-list-pointer-position-top,
            $-dropdown-list-pointer-position-left-right
        );
    }
}

@mixin _lib-dropdown-pointer(
    $-dropdown-list-background,
    $-dropdown-list-pointer-border,
    $-dropdown-list-pointer-position,
    $-dropdown-list-pointer-position-top,
    $-dropdown-list-pointer-position-left-right
) {
    @if $-dropdown-list-pointer-position == left {
        @include _lib-dropdown-pointer-default(
            $-dropdown-list-background,
            $-dropdown-list-pointer-border
        );

        &:before {
            @include lib-css(left, $-dropdown-list-pointer-position-left-right);
            @include lib-css(top, $-dropdown-list-pointer-position-top);
        }

        &:after {
            @include lib-css(left, $-dropdown-list-pointer-position-left-right - 1);
            @include lib-css(top, $-dropdown-list-pointer-position-top - 2);
        }
    }
    @else if $-dropdown-list-pointer-position == right {
        @include _lib-dropdown-pointer-default(
            $-dropdown-list-background,
            $-dropdown-list-pointer-border
        );

        &:before {
            @include lib-css(right, $-dropdown-list-pointer-position-left-right);
            @include lib-css(top, $-dropdown-list-pointer-position-top);
        }

        &:after {
            @include lib-css(right, $-dropdown-list-pointer-position-left-right - 1);
            @include lib-css(top, $-dropdown-list-pointer-position-top - 2);
        }
    }
}

@mixin _lib-dropdown-pointer-default(
    $-dropdown-list-background,
    $-dropdown-list-pointer-border
) {
    &:before,
    &:after {
        border-bottom-style: solid;
        content: '';
        display: block;
        height: 0;
        position: absolute;
        width: 0;
    }

    &:before {
        border: 6px solid;
        @include lib-css(border-color, transparent transparent $-dropdown-list-background transparent);
        z-index: 99;
    }

    &:after {
        border: 7px solid;
        @include lib-css(border-color, transparent transparent $-dropdown-list-pointer-border transparent);
        z-index: 98;
    }
}

//  Dropdown list item border != 0
@mixin _lib-dropdown-list-item-border($-dropdown-list-item-border) {
    @if $-dropdown-list-item-border != false and $-dropdown-list-item-border != 0 and $-dropdown-list-item-border != '' {
        @include lib-css(border-top, $-dropdown-list-item-border);
        &:first-child {
            border: none;
        }
    }
}

//  Dropdown list shadow
@mixin _lib-dropdown-list-shadow($-dropdown-list-shadow) {
    @include lib-css(box-shadow, $-dropdown-list-shadow);
}
