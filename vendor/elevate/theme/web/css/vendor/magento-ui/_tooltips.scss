//
//  Tooltips
//

@mixin lib-tooltip(
    $-tooltip-position         : top,
    $-tooltip-selector-toggle  : ".tooltip-toggle",
    $-tooltip-selector-content : ".tooltip-content",
    $-tooltip-background       : $mui-tooltip-background,
    $-tooltip-border-color     : $mui-tooltip-border-color,
    $-tooltip-border-width     : $mui-tooltip-border-width,
    $-tooltip-border-radius    : $mui-tooltip-border-radius,
    $-tooltip-color            : $mui-tooltip-color,
    $-tooltip-cursor           : $mui-tooltip-cursor,
    $-tooltip-font-size        : $mui-tooltip-font-size,
    $-tooltip-font-family      : $mui-tooltip-font-family,
    $-tooltip-font-weight      : $mui-tooltip-font-weight,
    $-tooltip-line-height      : $mui-tooltip-line-height,
    $-tooltip-font-style       : $mui-tooltip-font-style,
    $-tooltip-margin           : $mui-tooltip-margin,
    $-tooltip-padding          : $mui-tooltip-padding,
    $-tooltip-min-width        : $mui-tooltip-min-width,
    $-tooltip-max-width        : $mui-tooltip-max-width,
    $-tooltip-arrow-size       : $mui-tooltip-arrow-size,
    $-tooltip-arrow-offset     : $mui-tooltip-arrow-offset,
    $-tooltip-z-index          : $mui-tooltip-z-index
) {
    position: relative;

    #{$-tooltip-selector-content} {
        @include lib-css(background, $-tooltip-background);
        @include lib-css(border-radius, $-tooltip-border-radius);
        @include lib-css(margin, $-tooltip-margin);
        @include lib-css(max-width, $-tooltip-max-width);
        @include lib-css(min-width, $-tooltip-min-width);
        @include lib-css(padding, $-tooltip-padding);
        @include lib-css(z-index, $-tooltip-z-index);
        display: none;
        position: absolute;
        text-align: left;

        @include lib-typography(
            $-color       : $-tooltip-color,
            $-font-size   : $-tooltip-font-size,
            $-font-family : $-tooltip-font-family,
            $-font-weight : $-tooltip-font-weight,
            $-line-height : $-tooltip-line-height,
            $-font-style  : $-tooltip-font-style
        );

        @include _lib-tooltip-border($-tooltip-border-width, $-tooltip-border-color);

        $-tooltip-arrow-after-margin: $-tooltip-arrow-size * -1;
        $-tooltip-arrow-before-margin: ($-tooltip-arrow-size + round($-tooltip-border-width * 1.41421356)) * -1;

        &:after,
        &:before {
            border: solid transparent;
            content: '';
            height: 0;
            position: absolute;
            width: 0;
        }

        &:after {
            @include lib-css(border-width, $-tooltip-arrow-size);
            border-color: transparent;
        }

        &:before {
            @include lib-css(border-width, $-tooltip-arrow-before-margin * -1);
            border-color: transparent;
        }

        @include _lib-tooltip-arrow-position(
            $-tooltip-position,
            $-tooltip-arrow-size,
            $-tooltip-background,
            $-tooltip-arrow-after-margin,
            $-tooltip-arrow-before-margin,
            $-tooltip-arrow-offset,
            $-tooltip-border-color
        );
    }

    & #{$-tooltip-selector-toggle} {
        @include lib-css(cursor, $-tooltip-cursor);
    }

    & #{$-tooltip-selector-toggle}:hover + #{$-tooltip-selector-content},
    & #{$-tooltip-selector-toggle}:focus + #{$-tooltip-selector-content},
    &:hover #{$-tooltip-selector-content} {
        display: block;
    }
}

@mixin _lib-tooltip-border(
    $-tooltip-border-width,
    $-tooltip-border-color
) {
    @if $-tooltip-border-width != 0 and $-tooltip-border-width != false and $-tooltip-border-color != false {
        @include lib-css(border, $-tooltip-border-width solid $-tooltip-border-color);
    }
}

@mixin _lib-tooltip-arrow-position(
    $-tooltip-position,
    $-tooltip-arrow-size,
    $-tooltip-background,
    $-tooltip-arrow-after-margin,
    $-tooltip-arrow-before-margin,
    $-tooltip-arrow-offset,
    $-tooltip-border-color
) {
    @if $-tooltip-position == top {
        @include lib-css(margin-bottom, $-tooltip-arrow-size);
        bottom: 100%;
        left: 0;

        &:after,
        &:before {
            top: 100%;
        }
        &:after {
            @include lib-css(border-top-color, $-tooltip-background);
            @include lib-css(left, $-tooltip-arrow-offset + $-tooltip-arrow-size);
            @include lib-css(margin-left, $-tooltip-arrow-after-margin);
        }

        &:before {
            @include lib-css(border-top-color, $-tooltip-border-color);
            @include lib-css(left, $-tooltip-arrow-offset + $-tooltip-arrow-size);
            @include lib-css(margin-left, $-tooltip-arrow-before-margin);
        }
    }

    @if $-tooltip-position == left {
        @include lib-css(margin-right, $-tooltip-arrow-size);
        right: 100%;
        top: 0;

        &:after,
        &:before {
            left: 100%;
        }

        &:after {
            @include lib-css(border-left-color, $-tooltip-background);
            @include lib-css(margin-top, $-tooltip-arrow-after-margin);
            @include lib-css(top, $-tooltip-arrow-offset + $-tooltip-arrow-size)
        }

        &:before {
            @include lib-css(border-left-color, $-tooltip-border-color);
            @include lib-css(margin-top, $-tooltip-arrow-before-margin);
            @include lib-css(top, $-tooltip-arrow-offset + $-tooltip-arrow-size);
        }
    }

    @if $-tooltip-position == right {
        @include lib-css(margin-left, $-tooltip-arrow-size);
        left: 100%;
        top: 0;

        &:after,
        &:before {
            right: 100%;
        }

        &:after {
            @include lib-css(border-right-color, $-tooltip-background);
            @include lib-css(margin-top, $-tooltip-arrow-after-margin);
            @include lib-css(top, $-tooltip-arrow-offset + $-tooltip-arrow-size);
        }

        &:before {
            @include lib-css(border-right-color, $-tooltip-border-color);
            @include lib-css(margin-top, $-tooltip-arrow-before-margin);
            @include lib-css(top, $-tooltip-arrow-offset + $-tooltip-arrow-size);
        }
    }

    @if $-tooltip-position == bottom {
        @include lib-css(margin-top, $-tooltip-arrow-size);
        left: 0;
        top: 100%;

        &:after,
        &:before {
            bottom: 100%;
        }

        &:after {
            @include lib-css(border-bottom-color, $-tooltip-background);
            @include lib-css(left, $-tooltip-arrow-offset + $-tooltip-arrow-size);
            @include lib-css(margin-left, $-tooltip-arrow-after-margin);
        }

        &:before {
            @include lib-css(border-bottom-color, $-tooltip-border-color);
            @include lib-css(left, $-tooltip-arrow-offset + $-tooltip-arrow-size);
            @include lib-css(margin-left, $-tooltip-arrow-before-margin);
        }
    }
}
