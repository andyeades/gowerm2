//  Checkout tooltip
$checkout-tooltip-icon-arrow__font-size: 11px !default;
$checkout-tooltip-icon__font-size: 21px !default;


$checkout-tooltip-icon__color: $color-gray-light2 !default;
$checkout-tooltip-icon__content: $icon-help !default;
$checkout-tooltip-icon__hover__color: $primary__color !default;

$checkout-tooltip-content-mobile-popup__width: 200px !default;
$checkout-tooltip-content-mobile__right: -(10px) !default;
$checkout-tooltip-content-mobile__top: 30px + $checkout-tooltip-icon-arrow__font-size;


$checkout-tooltip-content__background-color: #FBFBFB !default;
$checkout-tooltip-content__padding: 11px !default;
$checkout-tooltip-content__border-width: 2px !default;
$checkout_tooltip_content__border_radius_on: 1 !default;

$checkout_tooltip_content__border_radius: $border-radius !default;
$checkout_tooltip_content__left_position: 38px !default;

$checkout_tooltip_label_display: none !default;

$checkout-tooltip-content__border-color: #00acb6 !default;
$checkout-tooltip-content__font-size: $font-size__base !default;
$checkout-tooltip-content__width: 270px !default;
$checkout-tooltip-content__active__border-color: $checkout-tooltip-content__border-color !default;
$checkout_tooltip_indent: 10px !default;

$checkout-tooltip-icon-arrow__left: -( $checkout-tooltip-content__padding + $checkout-tooltip-icon-arrow__font-size - $checkout-tooltip-content__border-width) !default;



//
//  Checkout Tooltip Content (position: top)
//  ---------------------------------------------

@mixin abs-checkout-tooltip-content-position-top {
    @include lib-css(right, $checkout-tooltip-content-mobile__right);
    @include lib-css(top, $checkout-tooltip-content-mobile__top);
    left: auto;

    &:before,
    &:after {
        @include lib-arrow(
            $_position: top,
            $_size: $checkout-tooltip-icon-arrow__font-size,
            $_color: $checkout-tooltip-content__background-color
        );
        @include lib-css(margin-top, $checkout-tooltip-icon-arrow__left);
        @include lib-css(right, $checkout_tooltip_indent);
        left: auto;
        top: 0;
    }

    &:before {
        @include lib-css(border-bottom-color, $checkout-tooltip-content__border-color);
    }

    &:after {
        @include lib-css(border-bottom-color, $checkout-tooltip-content__background-color);
        top: 1px;
    }
}


.field {
    .control {
        &._with-tooltip {
            position: relative;

            input {
                @include lib-css(margin-right, $checkout_tooltip_indent);
                width: calc(100% - #{$checkout-tooltip-icon__font-size + $checkout_tooltip_indent + 5px});
            }
        }
    }

    &.choice {
        .field-tooltip {
            display: inline-block;
            margin-left: $checkout_tooltip_indent;
            position: relative;
            top: -3px;
        }

        .field-tooltip-action {
            @include lib-css(line-height, $checkout-tooltip-icon__font-size);
        }
    }
}

.checkout-index-index {
    .modal-popup {
        .field-tooltip {
            .field-tooltip-content {
                @include abs-checkout-tooltip-content-position-top();
            }
        }
    }
}

.shipping-policy-block {
    &.field-tooltip {
        .field-tooltip-content {
            @include abs-checkout-tooltip-content-position-top();
        }
    }
}


//
//  Common
//  _____________________________________________

.field-tooltip {
    cursor: pointer;
    position: absolute;
    right: 0;
    top: 1px;

    .label {
        display: $checkout_tooltip_label_display;
    }

    &._active {
        @include lib-css(z-index, $checkout-tooltip__hover__z-index);

        .field-tooltip-content {
            display: block;
        }

        .field-tooltip-action {
            &:before {
                @include lib-css(color, $checkout-tooltip-icon__hover__color);
            }
        }
    }

    .field-tooltip-action {
        @include lib-icon-font(
                $checkout-tooltip-icon__content,
            $_icon-font-size: $checkout-tooltip-icon__font-size,
            $_icon-font-text-hide: true,
            $_icon-font-color: $checkout-tooltip-icon__color,
            $_icon-font-color-hover: $checkout-tooltip-icon__hover__color,
            $_icon-font-color-active: false
        );

        &:focus {
            ._keyfocus & {
                box-shadow: none;
                @include lib-css(z-index, $checkout-tooltip__hover__z-index);

                + .field-tooltip-content {
                    display: block;
                }

                &:before {
                    @include lib-css(color, $checkout-tooltip-icon__hover__color);
                }
            }
        }
    }

    .field-tooltip-content {
        @include lib-css(background, $checkout-tooltip-content__background-color);
        @include lib-css(border, $checkout-tooltip-content__border-width solid $checkout-tooltip-content__border-color);

        @if $checkout_tooltip_content__border_radius_on == 1 {
            border-radius: $checkout_tooltip_content__border_radius;
        }

        @include lib-css(font-size, $checkout-tooltip-content__font-size);
        @include lib-css(padding, $checkout-tooltip-content__padding);
        @include lib-css(width, $checkout-tooltip-content__width);
        display: none;
        left: $checkout_tooltip_content__left_position;
        position: absolute;
        text-transform: none;
        top: -9px;
        word-wrap: break-word;
        z-index: 2;

        &:before,
        &:after {
            @include lib-arrow(
                $_position: left,
                $_size: 10px,
                $_color: $checkout-tooltip-content__background-color
            );
            @include lib-css(left, $checkout-tooltip-icon-arrow__left);
            @include lib-css(top, $checkout-tooltip-content__padding);
            content: '';
            display: block;
            position: absolute;
            z-index: 3;
        }

        &:before {
            @include lib-css(border-right-color, $checkout-tooltip-content__active__border-color);
        }

        &:after {
            @include lib-css(border-right-color, $checkout-tooltip-content__background-color);
            width: 2px;
            z-index: 4;
        }

        @include max-screen($screen-xs-max) {
            .abs-checkout-tooltip-content-position-top-mobile {
                @include abs-checkout-tooltip-content-position-top();
            }
        }
    }
}

//
//  Mobile
//  _____________________________________________

@include max-screen($screen__xs) {
    .modal-popup {
        .field-tooltip {
            .field-tooltip-content {
                @include lib-css(width, $checkout-tooltip-content-mobile-popup__width);
            }
        }
    }
}
