<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_Blog
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/** @var \Mageplaza\Blog\Block\Widget\Posts $block */

$posts = $block->getCollection();

$url = $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];

$title_prefix = '';

if (strpos($url, 'posturite') !== false) {
    $title_prefix = 'Posturite ';
    ?>
    <div id="homepage-blog" class="homepage-block">
        <div class="container">
            <div class="section-title-outer">
                <div class="section-title"><a href="<?= $block->getBlogUrl(''); ?>"><h2><?= $title_prefix;?>Blog</h2></a></div>
            </div>
            <div class="articles-row row">
                <?php foreach ($posts as  $post) : ?>
                    <div class="grid-item">
                        <div class="post-list-item col-mp post-item-grid mp-3 mp-xs-12">
                            <div class="post-item-wrapper">
                                <?php if ($post->getImage()) : ?>
                                    <div class="post-image">
                                        <a href="<?= str_replace('/post', '', $post->getUrl()) ?>">
                                            <img class="img-responsive"


                                                <?php

                                                $image = $post->getImage()
                                                ?>

                                                <? //$block->resizeImage($post->getImage(), '400x'); ?>
                                                 src="<?= $block->resizeImage($post->getImage(), '400x'); ?>"
                                                 alt="<?= $block->escapeHtml($post->getName()); ?>"/>
                                        </a>
                                    </div>
                                <?php endif; ?>
                                <div class="post-info-wrapper">
                                    <div class="mp-post-title">
                                        <a class="post-link-title" title="<?= $block->escapeHtml($post->getName()); ?>"
                                           href="<?= str_replace('/post', '', $post->getUrl()) ?>">
                                            <?= $post->getName(); ?>
                                        </a>
                                    </div>

                                    <div class="mp-clearfix"></div>
                                    <div class="mp-post-meta-info mp-alignright">
                                        <div class="actions">
                                            <a class="mp-read-more" href="<?= $post->getUrl(); ?>"
                                               title="<?= __('Read More'); ?>">
                                                <?= __('Read More'); ?>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                <?php endforeach; ?>
            </div>
        </div>

    </div>

<?php } else { ?>

<div id="homepage-blog" class="homepage-block">
<div class="container">
  <div class="section-title-outer">
    <div class="section-title"><a href="<?= $block->getBlogUrl(''); ?>">Blog</a></div>
    <div class="read-all-link"><a href="<?= $block->getBlogUrl(''); ?>">Read all articles</a></div>
  </div>
  <div class="articles-row row">
      <?php foreach ($posts as  $post) : ?>
    <div class="article col-md-4 col-xs-12">
      <a class="post-image" href="<?= str_replace('blog/post', 'blog', str_replace('.html', '', $post->getUrl())); ?>">
        <div class="article-img-outer">
          <img class="article-img lazyload" src="/media/loader.png" data-src="<?= $block->resizeImage($post->getImage(), '400x'); ?>"
               data-src="<?= $block->resizeImage($post->getImage(), '400x'); ?>"
               alt="<?= $block->escapeHtml($post->getName()); ?>" >
        </div>
        <div class="article-title">
            <?= $block->escapeHtml($post->getName()); ?> </div>
        <div class="article-button button"><?= __('Read more'); ?>
        </div>
      </a>
    </div>
      <?php endforeach; ?>
  </div>
</div>

</div>

<?php }  ?>


