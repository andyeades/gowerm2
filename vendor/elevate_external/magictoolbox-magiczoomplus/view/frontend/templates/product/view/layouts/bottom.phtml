<?php

/**
 * @var $block \MagicToolbox\MagicZoomPlus\Block\Template
 */

$id = $block->getData('id');
$mainHTML = $block->getData('mainHTML');
$selectorsArray = $block->getData('selectorsArray');
$selectorMaxWidth = $block->getData('selectorMaxWidth');
$additionalClasses = $block->getData('additionalClasses');
$scrollOptions = $block->getData('scrollOptions');
$thumbSwitcherOptions = $block->getData('thumbSwitcherOptions');

$breakpoint = "768px";

$dataOptions = 'data-options="arrows: outside;loop:true;autostart:false;orientation: horizontal;items:[[320,2],[375,3],[480,4],[560,5],[768,6],[992,8]];lazyLoad:true;"';
?>
<style>
  .hide360{
  display:none !important;
  }
  .show360{
  display:block !important;
  }
</style>
<div class="MagicToolboxContainer selectorsBottom minWidth"<?= $thumbSwitcherOptions ?>>
    <?= $mainHTML; ?>
<?php
if (count($selectorsArray)) {
?>
    <div class="MagicToolboxSelectorsContainer<?php if (count($selectorsArray) == 1) echo ' hidden-container' ?>">
        <div id="MagicToolboxSelectors<?= $id ?>" class="<?= $additionalClasses ?>"<?= $scrollOptions ?>>
        <?= join("\n\t\t", $selectorsArray); ?>
        </div>
    </div>
<?php
}
?>
</div>

<script>






    jQuery(document).ready(function () {

                   
        var desktop_options = {
            step:1,
            autostart:false,
            loop:'infinite',
            arrows:'outside',
            orientation:'horizontal',
            items:[[768,5],[992,5]],
        }
        var desktop_options_string = 'loop:infinite;step:1;arrows:outside;autostart:false;orientation:horizontal;items:[[768,5],[992,5]];';
        var mobile_options_string = 'step:1;arrows:outside;loop:infinite;autostart:false;orientation: horizontal;items:[[320,3],[375,3],[480,4],[560,5],[768,6],[992,8]];lazyLoad:true;';


         

        jQuery('#MagicToolboxSelectors<?= $id ?>').attr('data-options',desktop_options_string);
   if(typeof MagicScroll !== "undefined"){
        MagicScroll.updateOptions('MagicToolboxSelectors<?=$id?>',desktop_options);
        MagicScroll.refresh('MagicToolboxSelectors<?=$id?>');
                                }

    });
            require(["jquery"], function(){
                           
                                   jQuery(".mt-thumb-switcher-360").on('click touchend', function(e){
                               
                                   e.preventDefault();
                                   jQuery("#mt360Container").removeClass("hide360").addClass("show360");
                                   jQuery("#mtImageContainer").addClass("hide360").removeClass("show360");

                               
                                });
                                   jQuery(".mt-thumb-switcher").on('click touchend', function(){
                                   
                                   jQuery(".mz-figure img").css('visibility', 'visible');
                                  jQuery("#mt360Container").addClass("hide360").removeClass("show360");
                                   jQuery("#mtImageContainer").removeClass("hide360").addClass("show360");

                                 
                                
                                });                                
                           
                            });
</script>
